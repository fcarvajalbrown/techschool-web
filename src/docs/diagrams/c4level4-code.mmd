# C4 Level 4 â€” Code (Config & Toolchain wiring)

```mermaid
flowchart TD
    DEV["ðŸ‘¤ **Developer**\ngit commit / git push\npnpm dev / pnpm build"]

    subgraph HOOKS["ðŸª Git Hooks â€” simple-git-hooks"]
        direction TB
        PRECOMMIT["**pre-commit**\nâ‘  pnpm lint-staged\nâ‘¡ pnpm ls-lint"]
        COMMITMSG["**commit-msg**\npnpm commitlint -c -e \$1"]
    end

    subgraph LINTERS["ðŸ” Linting Tools"]
        direction TB

        ESLINT["ðŸ“‹ **eslint.config.js**\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nFlat config chaining:\nÂ· neostandard (base JS/TS rules)\nÂ· @stylistic (formatting)\nÂ· import-x (import ordering)\nÂ· perfectionist (sort imports,\n  exports, named imports,\n  JSX props â€” all natural asc)\nÂ· eslint-plugin-astro\n  (Astro file support + a11y)\nÂ· astro-eslint-parser\n  (parses .astro files)\nÂ· typescript-eslint parser\n  (parses TS inside .astro)\nÂ· eslint-plugin-jsonc\n  (validates JSON key casing)\nÂ· eslint-plugin-yml\n  (YAML indent=3, double quotes)\nÂ· eslint-plugin-package-json\n  (validates package.json shape)"]

        LSLINT["ðŸ“ **.ls-lint.yml**\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nFile naming enforcement:\nÂ· .js .ts .css .json .yml â†’ kebab-case\nÂ· src/components/**/*.astro â†’ PascalCase\nÂ· src/layouts/**/*.astro   â†’ PascalCase\nÂ· src/pages/**/*.astro     â†’ kebab-case\nÂ· src/pages/_*/*.astro     â†’ PascalCase\nÂ· media files              â†’ kebab-case\n\nIgnores: dist/ node_modules/\n.git/ config root files"]

        COMMITLINT["ðŸ’¬ **commitlint.config.js**\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nextends @commitlint/config-conventional\n\nEnforces format:\n  type(scope): description\n\nValid types: feat Â· fix Â· docs\n  style Â· refactor Â· perf\n  test Â· chore Â· ci Â· build"]
    end

    subgraph CFGFILES["âš™ï¸ Project Configuration"]
        direction TB

        PKGJSON["ðŸ“¦ **package.json**\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nscripts:\n  dev     â†’ astro dev\n  build   â†’ astro build\n  preview â†’ astro preview\n  lint:fix â†’ eslint --cache --fix\n  prepare  â†’ simple-git-hooks\n\nlint-staged targets:\n  **/*.{js,mjs,cjs,ts} â†’ lint:fix\n  src/**/*.astro       â†’ lint:fix\n  src/**/*.{jsx,tsx}   â†’ lint:fix\n\nsimple-git-hooks registration:\n  pre-commit Â· commit-msg\n\nengines:\n  node >=22.14.0\n  pnpm >=10.5.2"]

        ASTROCFG["ðŸš€ **astro.config.mjs**\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nIntegrations registered:\n  astro-sitemap    â†’ /sitemap.xml\n  astro-compressor â†’ gzip + brotli\n  astro-icon       â†’ SVG icon system\n  astro-seo-schema â†’ JSON-LD blocks\n\nvite.css.transformer:\n  lightningcss\n  (replaces PostCSS,\n   faster + modern CSS)"]

        TSCFG["ðŸ”· **tsconfig.json**\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nextends astro/tsconfigs/strict\nincludes .astro/types.d.ts\n\nPath aliases (baseUrl = .):\n  @components/* â†’ src/components/*\n  @ui/*         â†’ src/components/ui/*\n  @struct/*     â†’ src/components/struct/*\n  @layouts/*    â†’ src/layouts/*\n  @scripts/*    â†’ src/scripts/*\n  @styles/*     â†’ src/styles/*\n  @data/*       â†’ src/data/*\n  @contracts    â†’ src/contracts\n  @images/*     â†’ src/images/*"]

        NPMRC["ðŸ“„ **.npmrc**\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\npnpm-specific settings:\nregistry config, hoisting rules,\nonlyBuiltDependencies:\n  esbuild Â· sharp\n  simple-git-hooks\n  unrs-resolver"]
    end

    DEV -->|"git commit triggers"| HOOKS
    PRECOMMIT -->|"runs ESLint --fix\non staged files"| ESLINT
    PRECOMMIT -->|"validates file\nnaming rules"| LSLINT
    COMMITMSG -->|"validates commit\nmessage format"| COMMITLINT
    DEV -->|"pnpm lint:fix\n(manual run)"| ESLINT
    PKGJSON -->|"registers hooks\nvia prepare script"| HOOKS
    PKGJSON -->|"lint-staged config\npoints to"| ESLINT
    ASTROCFG -->|"reads tsconfig\nfor path resolution\nand TS support"| TSCFG
    TSCFG -->|"typescript-eslint\nparser uses tsconfig"| ESLINT
    NPMRC -->|"controls pnpm install\nbefore package.json deps"| PKGJSON

    style DEV fill:#1168BD,color:#fff,stroke:#0e56a0
    style PRECOMMIT fill:#6A1B9A,color:#fff,stroke:#4a148c
    style COMMITMSG fill:#6A1B9A,color:#fff,stroke:#4a148c
    style ESLINT fill:#C62828,color:#fff,stroke:#b71c1c
    style LSLINT fill:#E65100,color:#fff,stroke:#bf360c
    style COMMITLINT fill:#2E7D32,color:#fff,stroke:#1b5e20
    style PKGJSON fill:#F57F17,color:#fff,stroke:#e65100
    style ASTROCFG fill:#0277BD,color:#fff,stroke:#01579b
    style TSCFG fill:#1565C0,color:#fff,stroke:#0d47a1
    style NPMRC fill:#4527A0,color:#fff,stroke:#311b92
    style HOOKS fill:#f3e5f5,stroke:#9c27b0,color:#333
    style LINTERS fill:#fce4ec,stroke:#e91e63,color:#333
    style CFGFILES fill:#e8f5e9,stroke:#4caf50,color:#333
```
